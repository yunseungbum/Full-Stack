				복습


DML
삽입하기
INSERT

여러개의 테이블에 한번에 추가하기
INSERT ALL
	INTO 테이블명1 VALUES(값)
	INTO 테이블명2 VALUES(값)
SELECT * FROM DUAL;


수정하기
UPDATE 테이블명  SET
컬럼명 = 수정할 값,
컬럼명 = 수정할 값,
컬럼명 = 수정할 값
WHERE 조건식

삭제하기
DELETE FROM 테이블명
WHERE 조건식


정규화
함수적 종속성을 제거해서 이상현상을 제거하기 위한 행위
테이블이 분리
조회 속도의 향상

함수적 종속성
결정자X가 종속자Y를 결정하는 관계

완전함수종속
결정자는 기본키 1개
나머지는 종속자

부분함수 종속
테이블에서 기본키가 복합키 일때,기본키를 구성하는 속성 중 일부에게도
종속되는 경우

이행함수 종속
x -> Y , Y->Z
X->Z


ASCII	지정된 문자의 ASCII값을 반환한다.
CHR	지정된 수치와 일치하는 ASCII코드를 반환한다.
RPAD	왼쪽 정렬 후 오른쪽에 생긴 빈공백에 특정 문자를 채워 반환한다.
LPAD	오른쪽 정렬 후 오른쪽에 생긴 빈공백에 특정 문자를 채워 반환한다.
TRIM	문자열 공백 문자들을 삭제한다.
RTRIM	문자열 오른쪽(뒤)의 공백 문자들을 삭제한다.
LTRIM	문자열 왼쪽(뒤)의 공백 문자들을 삭제한다.
LOWER	지정된 문자를 소문자로 반환한다.
UPPER	지정된 문자를 대문자로 반환한다.
INSTR	특정 문자의 위치를 반환한다.
INITCAP	지정된 문자열의 첫 단어를 대문자로 나머지는 소문자로 반환한다.
SUBSTR	시작 위치부터 선택 개수만큼 문자를 반환한다.
LENGTH	문자열의 길이를 반환한다.
REPLACE	첫 번째 파라미터로 지정한 문자를 두번째 파라미터로 지정한 문자로 바꿔준다.
CONCAT	입력되는 두 문자열을 연결하여 반환한다.
------------------------------------------------------------------------------

숫자함수
함수	기능
ABS	절대값을 반환한다.
ROUND	특정 자리수에서 반올림을 하여 반환한다.
FLOOR	주어진 숫자보다 작거나 같은 정수중 최대값을 반환한다.
TRUNC	특정 자리수에서 잘라내고 반환한다.
SIGN	주어진 값의 음수,정수,0 여부를 반환한다.
CEIL	주어진 숫자보다 크거나 같은 정수 중 최소값을 반환한다.
MOD	나누기 후 나머지를 반환한다.
POWER	주어진 숫자의 지정된 수 만큼의 제곱값을 반환한다.


날짜함수
함수		기능
ADD_MONTHS	특정날짜에 개월수를 더해준다.
MONTHS_BETWEEN	주어진 두 개의 날짜 간격 개월을 반환한다.
NEXT_DAY	주어진 일자가 다음에 나타나는 지정요일(1:일요일 ~ 7:토요일)의 날짜를 반환한다.
LAST_DAY	주어진 일자가 포함된 월의 말일을 반환한다.

※ 날짜 + 날짜 : 날짜끼리는 더하기가 안됩니다.
SYSDATE : 현재 날짜


형변환 함수
함수		기능
TO_CHAR		날짜를 형식에 맞춰 문자열로 변환
TO_DATE		문자열을 형식에 맞춰 날짜형으로 변환
TO_NUMBER	문자를 숫자로 변환(숫자만 있는 문자열은 묵시적으로 숫자로 취급하기에 잘 사용은 안한다.)

날짜형식 FORMATTING 모델
모델	기능
SCC, CC	세기
YYYY,YY	연도
MM	월
DD	일
DAY	요일
MON	월명(JAN)
MONTH	월이름이 다나온다(JANUARY)
HH,HH24	시간
MI	분
SS	초


NULL 처리 함수
NULL 값을 다른 값으로 변경
함수	기능
NVL	NULL값 대신 다른 값으로 변경 후 검색
NVL2	NULL일 때의 값, NULL이 아닐 때의 값을 각각 설정
NULLIF	두 인자 값을 비교, 같으면 NULL을 반환, 다르면 첫번째 인자 값을 반환


순위 함수
함수	기능
RANK	그룹 내 순위를 계산하여 NUMBER타입으로 순위를 반환, 중복 순위 계산
DENSE_RANK	그룹 내 순위를 계산하여 NUMBER타입으로 순위를 반환, 중복 순위 계산 안함




집계함수
여러 행들에 대한 연산의 결과를 하나의 행으로 반환한다.
집계 함수는 NULL을 체크하지 않는다. 단 COUNT(*)의 경우 NULL도 포함한 값을 반환한다.
함수	기능
COUNT	행들의 개수를 반환
MIN	행들의 최소값을 반환
MAX	행들의 최대값을 반환
SUM	행들의 합계를 반환
AVG	행들의 평균을 반환한다.
STDDEV	행들의 표준편차를 반환한다.
VARIANCE 행들의 분산을 반환한다.



HAVING절
Having 절은 Group by로 집계된 값 중 where 절 처럼 특정 조건을 추가한다고 생각하자
WHERE절과 HAVING절의 차이점
HAVING절은 GROUP BY절과 함께 사용해야 하며 집계 함수를 사용하여 조건절을 작성하거나
GROUP BY컬럼만 조건절에 사용할 수 있다.


DCL(Data Controll Language)
데이터 제어어
데이터베이스에 접근하고 객체들을 사용하도록 권한을 주고 회수하는 명령어

DCL의 종류
GRANT : 권한 부여
REVOKE : 권한 강탈

유저를 만들기
CREATE USER 유저명 identified by 비밀번호;

sqlplus -> 처음에 db에 접속하려고 할 때 사용하는 키워드

conn 계정명/비밀번호;


scott은 일반계정이고 다른 계정을 생성할 권한이 없다.

scott에게 계정을 만들 수 있는 권한을 줘야한다.

권한을 주는건 관리자 계정이 해야한다.

테이블스페이스
-오라클은 데이터를 관리하는 시스템이다
-따라서 데이터를 어딘가에 저장해 놓고 사용해야 하는데, 데이터 저장 단위 중
 가장 상위의 개념이 테이블스페이스다
-테이블들을 담을 커다란 공간이 테이블스페이스다.


CREATE TABLESPACE 테이블스페이스명 DATAFILE '경로와 이름' SIZE 크기 AUTOEXTEND 크기 (MAXSIZE 크기);
- 최대크기는 생략 가능하다.


테이블 스페이스의 생성
-BABY라는 이름으로 200MB의 크기로 생성할 것이다.
-논리적 개념인 테이블스페이스도 물리적으로는 파일로 존재하므로 실제 저장될 파일의 이름과 위치가 필요하다.
-오라클이 설치된 'C:\oraclexe\app\oracle\oradata\XE' 폴더에 BABY.dbf라는 이름으로 생성을 할 것이다.
-데이터가 늘어나 테이블스페이스가 꽉 찰 것을 대비해 '5MB'씩 자동으로 증가 옵션도 추가할 것이다.

권한주기
GRANT 권한 TO 대상계정;

권한
서버접속관련
CREATE USER 데이터베이스 유저생성 권한
CREATE SESSION 서버에 접속할 수 있도록 세션을 생성할 수 있는 권한
ALTER SESSION 서버에 접속한 상태에서 세션 옵션 변경 가능 권한
RESTRICTED SESSION 제한된 상태로 공개된 데이터베이스에 접속 가능

테이블 관련
CREATE TABLE 자신의 계정에 테이블 생성 가능
CREATE ANY TABLE 다른 사용자 계정에도 테이블 생성 가능

테이블스페이스 관련
CREATE TABLESPACE
ALTER TABLESPACE
DROP TABLESPACE
UNLIMITED TABLESPACE

DB에서 유저를 생성후 기본적으로 아래 세가지 권한을 주면
사용자 계정처럼 사용할 수 있다.

GRAND RESOURCE,CONNECT,DBA TO 대상;

RESOURCE 개체 생성,변경,제거 권한
CONNECT DB연결 권한
DBA DB관리자 권한

SCOTT에게 계정 생성 권한 주기



INDEX
-SELECT문을 통해 데이터를 조회하려는 테이블이 너무 거대한 경우, 정렬되지 않은 모든 데이터를 순차적으로 검색하면 조회 결과를 구하기까지 오랜 시간이 걸린다.
-오라클 데이터베이스에서 테이블내의 원하는 레코드를 빠르게 찾아갈 수 있도록 만들어진 데이터 구조이다.
-원하는 책을 찾은 것과 비슷하다.
-책이 정리가 안되어있으면 찾는데 시간이 오래 걸릴 것이다.
-도서관처럼 색인을 통해 정리해두는 것이 인덱스이다.

INDEX의 생성
-인덱스는 테이블 내의 1개의 컬럼, 혹은 여러 개의 컬럼을 이용하여 생성될 수 있다.
-많은 데이터가 있다면 인덱스를 만들어놓는것이 효과적이다.
-데이터가 적으면 정리하고 찾는거보다, 그냥 찾는것이 더 빠르다.
-규모가 큰 테이블, 여러 번 생성, 수정, 삭제가 발생하지 않는 테이블에 적합하다.

자동 인덱스
PRIMARY KEY 또는 UNIQUE에 의해 자동으로 생성되는 INDEX
가장 기본적인 B-Tree INDEX로 인덱스

수동 인덱스
사용자가 직접 생성한 INDEX를 의미한다.

INDEX 조회
인덱스는 USER_INDEXES 시스템 뷰에서 조회할 수 있음
SELECT * FROM ALL_INDEXS WHERE TABLE_NAME = '테이블 명':


INDEX 삭제
조회 성능을 높이기 위해 만든 객체지만 저장공간을 많이 차지하며 DDL작업(INSERT, DELETE, UPDATE) 시 부하가 많이 발생해 전체적인 데이터베이스 성능을 저하시킨다.
DBA는 주기적으로 INDEX를 검토하여 사용하지 않는 인덱스는 삭제하는 것이 데이터베이스 전체 성능을 향상 시킬 수 있다.


SUBQUERY
-특정 SQL문 안에 또 다른 SQL문장이 포함되어 있는것
-여러번 DB접속이 필요한 상황을 한번으로 줄여 속도를 증가시킬 수 있다.
서브쿼리를 사용할 수 있는 곳.
-where절, having절
-select, delete문의 from절
-update문의 set
-insert문의 into



































































































